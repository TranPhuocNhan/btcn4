<h1 class="text-center">{{title}}</h1>

<!-- Hiá»ƒn thá»‹ thÃ´ng tin ngÆ°á»i dÃ¹ng -->
{{#if user}}
  <div class="user-info">
    <h4>Xin chÃ o, {{user.username}}</h4>
    <img src="{{user.avatar}}" alt="" class="rounded-circle" width="100" height="100">
    <p><strong>Email:</strong> {{user.email}}</p>
  </div>
{{else}}
  <div class="alert alert-warning" role="alert">
    Báº¡n chÆ°a Ä‘Äƒng nháº­p. <a href="/login" class="alert-link">ÄÄƒng nháº­p táº¡i Ä‘Ã¢y</a>.
  </div>
{{/if}}

<!-- Danh sÃ¡ch ngÆ°á»i chÆ¡i online -->
<h3>NgÆ°á»i chÆ¡i online</h3>
<ul class="list-group">
  {{#each usersOnline}}
    <li class="list-group-item">
      <img src="{{this.avatar}}" alt="" class="rounded-circle" width="30" height="30">
      {{this.username}}
      <button class="btn btn-sm btn-primary float-right">Má»i vÃ o bÃ n</button>
    </li>
  {{/each}}
</ul>


<!-- Khung chat -->
<h3>Chat chung</h3>
<div class="chat-box border p-3">
  <div id="messages">
    {{#each messages}}
      <div class="message">
        <strong>{{this.user}}:</strong> {{this.text}}
      </div>
    {{/each}}
  </div>

  <textarea id="messageInput" class="form-control" rows="2" placeholder="Nháº­p tin nháº¯n"></textarea>

  <!-- Emoji há»— trá»£ -->
  <div class="emoji-list mt-2">
    <span class="emoji">ğŸ˜€</span>
    <span class="emoji">ğŸ˜‚</span>
    <span class="emoji">ğŸ˜</span>
    <span class="emoji">ğŸ˜</span>
    <span class="emoji">ğŸ˜œ</span>
    <span class="emoji">ğŸ˜¢</span>
    <span class="emoji">ğŸ˜¡</span>
    <span class="emoji">ğŸ˜±</span>
    <span class="emoji">ğŸ¤”</span>
    <span class="emoji">ğŸ¤—</span>
  </div>

  <button id="sendMessage" class="btn btn-success mt-2">Gá»­i</button>
</div>

<!-- Danh sÃ¡ch cÃ¡c bÃ n game -->
<h3>BÃ n game</h3>
<div class="game-tables">
  {{#each gameTables}}
    <div class="game-table border p-3 mt-2">
      <p><strong>BÃ n game {{this.name}}</strong></p>
      <p><em>{{this.status}}</em></p>
      <button class="btn btn-info" {{#if this.started}}disabled{{/if}}>VÃ o bÃ n</button>
      {{#unless this.started}}
        <button class="btn btn-primary">Táº¡o bÃ n má»›i</button>
      {{/unless}}
    </div>
  {{/each}}
</div>

<script>
  // Khi click vÃ o má»™t emoji, chÃ¨n vÃ o Ã´ nháº­p tin nháº¯n
  document.querySelectorAll('.emoji').forEach(emoji => {
    emoji.addEventListener('click', function () {
      const messageInput = document.getElementById('messageInput');
      messageInput.value += emoji.textContent; // ThÃªm emoji vÃ o cuá»‘i Ã´ nháº­p tin nháº¯n
      messageInput.focus(); // Äáº£m báº£o Ã´ nháº­p tin nháº¯n váº«n Ä‘Æ°á»£c focus
    });
  });

  // Gá»­i tin nháº¯n (vÃ­ dá»¥: sáº½ gá»­i tin nháº¯n khi báº¥m vÃ o nÃºt gá»­i)
  document.getElementById('sendMessage').addEventListener('click', function () {
    const messageInput = document.getElementById('messageInput');
    const messageText = messageInput.value.trim();
    
    if (messageText) {
      // Gá»­i tin nháº¯n (Báº¡n cÃ³ thá»ƒ xá»­ lÃ½ gá»­i tin nháº¯n qua socket hoáº·c gá»­i Ä‘áº¿n server)
      console.log('Gá»­i tin nháº¯n:', messageText);
      // Sau khi gá»­i tin nháº¯n, xÃ³a ná»™i dung trong Ã´ nháº­p
      messageInput.value = '';
    }
  });
</script>